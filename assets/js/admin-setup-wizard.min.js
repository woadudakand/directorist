jQuery(document).ready((function(e){var t=e("#atbdp_dummy_form"),i=0,r="";e(t).on("submit",(function(t){t.preventDefault(),e(".atbdp_dummy_body").fadeOut(300),e(".atbdp-c-footer").fadeOut(300),e(".directorist-importer__importing").fadeIn(300),e(this).parent(".csv-fields").fadeOut(300),e(".atbdp-mapping-step").removeClass("active").addClass("done"),e(".atbdp-progress-step").addClass("active");var o=0,s=function(){var t=new FormData;t.append("action","atbdp_dummy_data_import"),t.append("file",e("#dummy_csv_file").val()),t.append("limit",e("#atbdp-listings-to-import").val()),t.append("image",e("#atbdp-import-image").is(":checked")?1:""),t.append("delimiter",","),t.append("update_existing",""),t.append("position",i),t.append("directorist_nonce",import_export_data.directorist_nonce),t.append("pre_mapped",!0),e.ajax({method:"POST",processData:!1,contentType:!1,url:import_export_data.ajaxurl,data:t,success:function(t){t.error?console.log({response:t}):(t.imported,t.failed,r=t.url,e(".importer-details").html("Imported ".concat(t.next_position," out of ").concat(t.total)),e(".directorist-importer-progress").val(t.percentage),"100"!=t.percentage&&o<150?(i=t.next_position,s(),o++):window.location=t.url,e('input[name="save_step"]').addClass("btn-hide"),e(".directorist-importer-length").css("width",t.percentage+"%"))},error:function(e){window.location=r}})};s()})),e(".directorist-submit-importing").on("click",(function(t){t.preventDefault(),e(this).addClass("loading"),e(".directorist_dummy_data_log").text("Preparing data..."),e(".directorist-setup-wizard__content").addClass("hidden"),e(".middle-content-import").removeClass("hidden");var i=0,r=function(){var t={action:"directorist_setup_wizard",directorist_nonce:import_export_data.directorist_nonce};e('input[name="directory_type_settings"]').is(":checked")&&(t.directory_type_settings=!0),e('input[name="share_non_sensitive_data"]').is(":checked")&&(t.share_non_sensitive_data=!0),e('input[name="import_listings"]').is(":checked")&&(t.import_listings=!0),e('input[name="required_plugins"]').is(":checked")&&(t.required_plugins=!0),t.counter=i,e.ajax({method:"POST",url:import_export_data.ajaxurl,data:t,success:function(t){console.log(t),e(".directorist-import-text-inner").empty().text(t.log),t.completed&&(e(".directorist-import-text-inner").empty().text(t.log),window.location=t.url),i++;var o=t.percentage;e(".directorist-import-progress-bar").css("width",o+"%"),e(".directorist-importer-progress").val(o),e(".directorist-import-progress-info-precent").text(o+"%"),r()}})};r()})),e("body").on("keyup",".directorist-location-js",(function(t){t.preventDefault(),e(this).val().length>0?e(this).parent(".directorist-search-field").addClass("input-is-focused"):e(this).parent(".directorist-search-field").removeClass("input-is-focused")})),e("body").on("click",".directorist-setup-wizard__box__content__input--clear",(function(t){t.preventDefault(),e(this).siblings("input").val(""),e(this).parent(".directorist-search-field").removeClass("input-is-focused")})),e(".atbdp-sw-gmap-key").hide(),e("#select_map").on("change",(function(t){"google"===e(this).val()?e(".atbdp-sw-gmap-key").show():e(".atbdp-sw-gmap-key").hide()})),"google"===e("#select_map").val()?e(".atbdp-sw-gmap-key").show():e(".atbdp-sw-gmap-key").hide(),e(".atbdp-sw-featured-listing").hide(),e("#enable_monetization").on("change",(function(){!0===e(this).prop("checked")?e(".atbdp-sw-featured-listing").show():e(".atbdp-sw-featured-listing").hide()})),!0===e("#enable_monetization").prop("checked")?e(".atbdp-sw-featured-listing").show():e(".atbdp-sw-featured-listing").hide(),e(".atbdp-sw-listing-price").hide(),e("#enable_featured_listing").on("change",(function(){!0===e(this).prop("checked")?e(".atbdp-sw-listing-price").show():e(".atbdp-sw-listing-price").hide()})),!0===e("#enable_monetization").prop("checked")?e(".atbdp-sw-listing-price").show():e(".atbdp-sw-listing-price").hide(),e("#select_map").select2({minimumResultsForSearch:-1}),e("#atbdp-listings-to-import").select2({minimumResultsForSearch:-1}),e("#others-listing").on("change",(function(){e(this).is(":checked")?e(".directorist-setup-wizard__checkbox--custom").slideDown():e(".directorist-setup-wizard__checkbox--custom").slideUp()}));var o=document.querySelectorAll('.directorist-setup-wizard__checkbox input[type="checkbox"]'),s=document.querySelector(".directorist-setup-wizard__counter .directorist-setup-wizard__counter__desc"),n=document.querySelector(".directorist-setup-wizard__notice"),a=document.querySelector(".directorist-setup-wizard__next .directorist-setup-wizard__btn--next"),d=document.querySelector(".directorist-setup-wizard__counter .selected_count"),c=document.querySelector(".directorist-setup-wizard__counter .max_count"),p=function(){var e=Array.from(o).filter((function(e){return e.checked})).length;d.textContent=e,c.textContent=5,e<1?(n.style.display="block",a.disabled=!0):(n.style.display="none",a.disabled=!1),e>=5?(s.style.display="block",o.forEach((function(e){e.checked||(e.disabled=!0)}))):(s.style.display="none",o.forEach((function(e){e.disabled=!1})))};o.forEach((function(e){e.addEventListener("change",p)}))}));